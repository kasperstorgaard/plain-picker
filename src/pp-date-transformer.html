<link rel="import" href="../../polymer/polymer.html">

<dom-module id="pp-date-transformer">
    <script>
        Polymer({
            is: 'pp-date-transformer',
            properties: {
                date: {
                    type: Object,
                    notify: true,
                    value: null
                },
                json: {
                    type: String,
                    notify: true,
                    value: ''
                },
                utc: {
                    type: Boolean,
                    value: false
                }
            },
            observers: [
                '_setDate(json, utc)',
                '_setJSON(date.*)'
            ],
            _setJSON (dateMutations) {
                const { base } = dateMutations;
                this.json = base && base.toJSON ? base.toJSON() : '';
            },
            _setDate (json, utc) {
                if (!json) {
                    this.date = null;
                    return;
                }
                this.date = utc ? new Date(Date.UTC(json)) : new Date(json);
            }
        });
    </script>
</dom-module>
