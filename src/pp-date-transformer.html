<link rel="import" href="../../polymer/polymer.html">

<dom-module id="pp-date-transformer">
    <script>
        Polymer({
            is: 'pp-date-transformer',
            properties: {
                date: {
                    type: Object,
                    notify: true,
                    value: null
                },
                json: {
                    type: String,
                    notify: true,
                    value: ''
                }
            },
            observers: [
                '_setDate(json)',
                '_setJSON(date.*)'
            ],
            _setJSON (dateMutations) {
                const { base } = dateMutations;
                this.json = base && base.toJSON ? base.toJSON() : '';
            },
            _setDate (json) {
                if (!json) {
                    this.date = null;
                    return;
                }
                if (this.date && this.date.toJSON() === json) {
                    return;
                }
                this.date = new Date(json);
            }
        });
    </script>
</dom-module>
